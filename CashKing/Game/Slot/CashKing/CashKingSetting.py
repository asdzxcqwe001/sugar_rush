# <editor-fold desc="Hide">
cost = 1
if __name__ == "__main__":
    from CashKingInfo import GameInfo
else:
    from .CashKingInfo import GameInfo

active_symbol_id_seq = [30, 25, 21, 20, 15, 11, 10, 105, 101]


def GetActiveSymbolID(fake_main_reels, is_special=False):
    active_sym_id_dict = dict()
    for bet in fake_main_reels:
        active_sym_id_set = set()
        for reel_id in fake_main_reels[bet]:
            if (is_special) != (reel_id == "3"):    # xor
                continue
            active_sym_id_set.update(fake_main_reels[bet][reel_id])
        active_sym_id_set.discard(0)

        active_sym_id_dict[bet] = sorted(active_sym_id_set)
    return active_sym_id_dict


BillList = {}
for info in GameInfo:
    Ratio = info["extra_odds"]["Ratio"]
    BillList[Ratio] = {}
    for bet in info['extra_odds']["Bonus"]:
        BillList[Ratio][str(bet)] = [int(bet) * odds for odds in info['extra_odds']["Bonus"][str(bet)]["Odds"]]


Setting = dict()
# </editor-fold>


# <editor-fold desc="Ratio 1">
Ratio = 1
fake_main_reels = {
    "100": {
        "0":[	11,	0,	15,	0,	21,	0,	11,	0,	15,	0,	21,	0,	11,	0,	11,	0,	15,	0,	15,	0,	21,	0,	21,	0,	11,	0,	15,	0,	21,	0,	11,	0,	21,	0,	15,	0,	21,	0,	21,	0,	21,	0,	11,	0,	15,	0,	11,	0,	11,	0,	11,	0,	15,	0,	15,	0,	15,	0],																																																																																																																																									
        "1":[	11,	0,	15,	0,	21,	0,	11,	0,	20,	0,	20,	0,	10,	0,	15,	0,	21,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	20,	0,	21,	0,	21,	0,	10,	0,	10,	0,	10,	0,	15,	0,	15,	0,	11,	0,	20,	0,	20,	0,	20,	0,	10,	0,	10,	0,	21,	0,	11,	0,	11,	0,	15,	0,	10,	0,	21,	0,	21,	0,	21,	0,	20,	0,	10,	0,	15,	0,	15,	0,	15,	0,	21,	0,	11,	0,	20,	0,	10,	0,	11,	0,	20,	0,	10,	0,	20,	0,	11,	0,	10,	0],																																																																																													
        "2":[	10,	0,	11,	0,	15,	0,	11,	0,	10,	0,	15,	0,	11,	0,	11,	0,	10,	0,	15,	0,	15,	0,	15,	0,	11,	0,	10,	0,	10,	0,	15,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	11,	0,	10,	0,	10,	0,	10,	0,	11,	0,	15,	0,	15,	0,	10,	0,	10,	0],																																																																																																																																							
        "3":[	6,	0,	2,	0,	5,	0,	6,	0,	6,	0,	2,	0,	5,	0,	2,	0,	7,	0,	6,	0,	2,	0,	2,	0,	2,	0,	7,	0,	6,	0,	2,	0,	5,	0,	2,	0,	6,	0,	7,	0,	2,	0,	5,	0,	5,	0,	5,	0,	7,	0,	7,	0,	2,	0,	2,	0,	5,	0,	6,	0,	2,	0,	7,	0,	7,	0,	7,	0,	2,	0,	2,	0,	7,	0,	6,	0,	6,	0,	6,	0,	5,	0,	5,	0,	2,	0,	7,	0,	2,	0,	2,	0,	7,	0,	2,	0,	2,	0],																																																																																																	
    },
    "500": {
        "0":[	11,	0,	15,	0,	21,	0,	11,	0,	15,	0,	21,	0,	11,	0,	11,	0,	15,	0,	15,	0,	21,	0,	21,	0,	11,	0,	15,	0,	21,	0,	11,	0,	21,	0,	15,	0,	21,	0,	21,	0,	21,	0,	11,	0,	15,	0,	11,	0,	11,	0,	11,	0,	15,	0,	15,	0,	15,	0],																																																																																																																																									
        "1":[	11,	0,	15,	0,	21,	0,	11,	0,	20,	0,	20,	0,	10,	0,	15,	0,	21,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	20,	0,	21,	0,	21,	0,	10,	0,	10,	0,	10,	0,	15,	0,	15,	0,	11,	0,	20,	0,	20,	0,	20,	0,	10,	0,	10,	0,	21,	0,	11,	0,	11,	0,	15,	0,	10,	0,	21,	0,	21,	0,	21,	0,	20,	0,	10,	0,	15,	0,	15,	0,	15,	0,	21,	0,	11,	0,	20,	0,	10,	0,	11,	0,	20,	0,	10,	0,	20,	0,	11,	0,	10,	0],																																																																																													
        "2":[	20,	0,	11,	0,	15,	0,	11,	0,	20,	0,	20,	0,	10,	0,	15,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	20,	0,	10,	0,	10,	0,	10,	0,	15,	0,	15,	0,	11,	0,	20,	0,	20,	0,	20,	0,	10,	0,	10,	0,	11,	0,	11,	0,	15,	0,	10,	0,	20,	0,	10,	0,	15,	0,	15,	0,	15,	0,	11,	0,	20,	0,	10,	0,	11,	0,	20,	0,	10,	0,	20,	0,	11,	0,	10,	0],																																																																																																													
        "3":[	6,	0,	2,	0,	5,	0,	6,	0,	6,	0,	2,	0,	5,	0,	2,	0,	7,	0,	6,	0,	2,	0,	2,	0,	2,	0,	7,	0,	6,	0,	2,	0,	5,	0,	2,	0,	6,	0,	7,	0,	2,	0,	5,	0,	5,	0,	5,	0,	7,	0,	7,	0,	2,	0,	2,	0,	5,	0,	6,	0,	2,	0,	7,	0,	7,	0,	7,	0,	2,	0,	2,	0,	7,	0,	6,	0,	6,	0,	6,	0,	5,	0,	5,	0,	2,	0,	7,	0,	2,	0,	2,	0,	7,	0,	2,	0,	2,	0],																																																																																																	
    },
    "1000": {
        "0":[	11,	0,	15,	0,	21,	0,	11,	0,	15,	0,	21,	0,	11,	0,	11,	0,	15,	0,	15,	0,	21,	0,	21,	0,	11,	0,	15,	0,	21,	0,	11,	0,	21,	0,	15,	0,	21,	0,	21,	0,	21,	0,	11,	0,	15,	0,	11,	0,	11,	0,	11,	0,	15,	0,	15,	0,	15,	0],																																																																																																																																									
        "1":[	11,	0,	15,	0,	21,	0,	11,	0,	20,	0,	20,	0,	10,	0,	15,	0,	21,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	20,	0,	21,	0,	21,	0,	10,	0,	10,	0,	10,	0,	15,	0,	15,	0,	11,	0,	20,	0,	20,	0,	20,	0,	10,	0,	10,	0,	21,	0,	11,	0,	11,	0,	15,	0,	10,	0,	21,	0,	21,	0,	21,	0,	20,	0,	10,	0,	15,	0,	15,	0,	15,	0,	21,	0,	11,	0,	20,	0,	10,	0,	11,	0,	20,	0,	10,	0,	20,	0,	11,	0,	10,	0],																																																																																													
        "2":[	20,	0,	11,	0,	15,	0,	11,	0,	20,	0,	20,	0,	10,	0,	15,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	20,	0,	10,	0,	10,	0,	10,	0,	15,	0,	15,	0,	11,	0,	20,	0,	20,	0,	20,	0,	10,	0,	10,	0,	11,	0,	11,	0,	15,	0,	10,	0,	20,	0,	10,	0,	15,	0,	15,	0,	15,	0,	11,	0,	20,	0,	10,	0,	11,	0,	20,	0,	10,	0,	20,	0,	11,	0,	10,	0],																																																																																																													
        "3":[	5,	0,	2,	0,	4,	0,	6,	0,	6,	0,	2,	0,	5,	0,	2,	0,	4,	0,	6,	0,	2,	0,	2,	0,	2,	0,	7,	0,	7,	0,	4,	0,	6,	0,	7,	0,	5,	0,	6,	0,	6,	0,	7,	0,	4,	0,	2,	0,	5,	0,	5,	0,	5,	0,	7,	0,	4,	0,	4,	0,	2,	0,	2,	0,	5,	0,	6,	0,	7,	0,	7,	0,	4,	0,	4,	0,	4,	0,	6,	0,	7,	0,	5,	0,	6,	0,	6,	0,	6,	0,	5,	0,	5,	0,	2,	0,	7,	0,	2,	0,	2,	0,	4,	0,	2,	0,	7,	0,	7,	0,	7,	0,	2,	0,	7,	0,	2,	0,	6,	0,	2,	0],																																																																									
    },
    "5000": {
        "0":[	15,	0,	21,	0,	25,	0,	25,	0,	25,	0,	11,	0,	21,	0,	11,	0,	15,	0,	25,	0,	11,	0,	11,	0,	11,	0,	15,	0,	25,	0,	11,	0,	21,	0,	11,	0,	25,	0,	15,	0,	11,	0,	21,	0,	21,	0,	21,	0,	15,	0,	15,	0,	11,	0,	11,	0,	21,	0,	15,	0,	11,	0,	15,	0,	15,	0,	15,	0,	11,	0,	11,	0,	21,	0,	25,	0,	25,	0,	25,	0,	21,	0,	21,	0,	11,	0,	15,	0,	11,	0,	11,	0,	15,	0,	11,	0,	11,	0],																																																																																																	
        "1":[	15,	0,	21,	0,	25,	0,	15,	0,	15,	0,	10,	0,	11,	0,	20,	0,	11,	0,	21,	0,	15,	0,	10,	0,	10,	0,	11,	0,	11,	0,	11,	0,	25,	0,	25,	0,	10,	0,	21,	0,	15,	0,	11,	0,	20,	0,	11,	0,	15,	0,	25,	0,	21,	0,	11,	0,	20,	0,	20,	0,	20,	0,	25,	0,	10,	0,	10,	0,	10,	0,	21,	0,	21,	0,	11,	0,	11,	0,	20,	0,	15,	0,	21,	0,	15,	0,	15,	0,	15,	0,	21,	0,	21,	0,	10,	0,	11,	0,	10,	0,	10,	0,	25,	0,	10,	0,	11,	0,	11,	0,	11,	0,	10,	0,	11,	0,	10,	0,	15,	0,	10,	0],																																																																									
        "2":[	20,	0,	11,	0,	15,	0,	11,	0,	20,	0,	20,	0,	10,	0,	15,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	20,	0,	10,	0,	10,	0,	10,	0,	15,	0,	15,	0,	11,	0,	20,	0,	20,	0,	20,	0,	10,	0,	10,	0,	11,	0,	11,	0,	15,	0,	10,	0,	20,	0,	10,	0,	15,	0,	15,	0,	15,	0,	11,	0,	20,	0,	10,	0,	11,	0,	20,	0,	10,	0,	20,	0,	11,	0,	10,	0,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10,	10],																																																																									
        "3":[	5,	0,	2,	0,	4,	0,	6,	0,	6,	0,	2,	0,	5,	0,	2,	0,	4,	0,	6,	0,	2,	0,	2,	0,	2,	0,	7,	0,	7,	0,	4,	0,	6,	0,	7,	0,	5,	0,	6,	0,	6,	0,	7,	0,	4,	0,	2,	0,	5,	0,	5,	0,	5,	0,	7,	0,	4,	0,	4,	0,	2,	0,	2,	0,	5,	0,	6,	0,	7,	0,	7,	0,	4,	0,	4,	0,	4,	0,	6,	0,	7,	0,	5,	0,	6,	0],																																																																																																													
    },
    "10000": {
        "0":[	15,	0,	21,	0,	25,	0,	25,	0,	25,	0,	11,	0,	21,	0,	11,	0,	15,	0,	25,	0,	11,	0,	11,	0,	11,	0,	15,	0,	25,	0,	11,	0,	21,	0,	11,	0,	25,	0,	15,	0,	11,	0,	21,	0,	21,	0,	21,	0,	15,	0,	15,	0,	11,	0,	11,	0,	21,	0,	15,	0,	11,	0,	15,	0,	15,	0,	15,	0,	11,	0,	11,	0,	21,	0,	25,	0,	25,	0,	25,	0,	21,	0,	21,	0,	11,	0,	15,	0,	11,	0,	11,	0,	15,	0,	11,	0,	11,	0],																																																																																																	
        "1":[	15,	0,	21,	0,	25,	0,	15,	0,	15,	0,	10,	0,	11,	0,	20,	0,	11,	0,	21,	0,	15,	0,	10,	0,	10,	0,	11,	0,	11,	0,	11,	0,	25,	0,	25,	0,	10,	0,	21,	0,	15,	0,	11,	0,	20,	0,	11,	0,	15,	0,	25,	0,	21,	0,	11,	0,	20,	0,	20,	0,	20,	0,	25,	0,	10,	0,	10,	0,	10,	0,	21,	0,	21,	0,	11,	0,	11,	0,	20,	0,	15,	0,	21,	0,	15,	0,	15,	0,	15,	0,	21,	0,	21,	0,	10,	0,	11,	0,	10,	0,	10,	0,	25,	0,	10,	0,	11,	0,	11,	0,	11,	0,	10,	0,	11,	0,	10,	0,	15,	0,	10,	0],																																																																									
        "2":[	20,	0,	11,	0,	15,	0,	11,	0,	20,	0,	20,	0,	10,	0,	15,	0,	11,	0,	11,	0,	11,	0,	10,	0,	15,	0,	20,	0,	10,	0,	10,	0,	10,	0,	15,	0,	15,	0,	11,	0,	20,	0,	20,	0,	20,	0,	10,	0,	10,	0,	11,	0,	11,	0,	15,	0,	10,	0,	20,	0,	10,	0,	15,	0,	15,	0,	15,	0,	11,	0,	20,	0,	10,	0,	11,	0,	20,	0,	10,	0,	20,	0,	11,	0,	10,	0],																																																																																																													
        "3":[	4,	0,	2,	0,	3,	0,	6,	0,	6,	0,	7,	0,	2,	0,	5,	0,	2,	0,	4,	0,	6,	0,	7,	0,	7,	0,	2,	0,	2,	0,	2,	0,	3,	0,	3,	0,	7,	0,	4,	0,	6,	0,	2,	0,	5,	0,	2,	0,	6,	0,	3,	0,	4,	0,	2,	0,	5,	0,	5,	0,	5,	0,	3,	0,	7,	0,	7,	0,	7,	0,	4,	0,	4,	0,	2,	0,	2,	0,	5,	0,	6,	0],																																																																																																																	
    },
}
line_bet_list = [int(bet) for bet in fake_main_reels.keys()]

SpecialReelSymbolMulti = {
    "3": 50,
    "4": 25,
    "5": 10,
    "6": 5,
    "7": 2,
}

normal_reel_active_symbol = GetActiveSymbolID(fake_main_reels, is_special=False)
normal_reel_symbol_id_set = set()
for x in normal_reel_active_symbol.values():
    normal_reel_symbol_id_set.update(x)
normal_reel_symbol_id_list = sorted(normal_reel_symbol_id_set, key=lambda x: active_symbol_id_seq.index(x))


Setting[str(Ratio)] = {     # 1
    "game_id": "CashKing",
    "game_name": "CashKing",
    "ProbId": str(Ratio),
    "line_bet_list": line_bet_list,
    "slot_type": "lines",
    "max_lines": cost,  # total_bet = line_bet * max_lines(cost)
    "cost": cost,  # 新增cost欄位，計算total_bet盡量用這個，也能用這來辨認是該遊戲是否適配單一押注段
    "winnable_lines": 1,  # 可贏線數，即拿來計算線獎的線數
    "reel_amount": 7,
    "reel_length": 7,
    "check_reel_amount": 7,
    "check_reel_length": 7,
    "line_data": [[0,0,0]],
    "extra_info": {
        "SpecialReelSymbolMulti": SpecialReelSymbolMulti,
        "UpgradeReels": {
            "100": [0,0],  # Bet: [NormalReel, SpecialReel]
            "500": [1,0],
            "1000": [0,1],
            "5000": [1,0],
            "10000": [0,1],
        },
       "NormalReelSymbol": normal_reel_symbol_id_list,
        "SpecialReelActiveSymbol": GetActiveSymbolID(fake_main_reels, is_special=True),
        "Bill": BillList[Ratio],
    },
    "extra_bet": {"Enable": False, "Ratio": 1.5},
    "fake_main_reels": fake_main_reels,
    "fake_fever_reels": {
    },
    "special_odds": {
        'fever':[0,0,0,10,12,15,20,30],
        'fever_again':[0,0,5,10,12,15,20,30]

    },
    "odds": {
        "1":[0,0,0,0,0,100,150,175,200,250,500,750,1500,3500,7000,15000],
        "2":[0,0,0,0,0,75,100,125,150,200,400,600,1250,3000,6000,10000],
        "3":[0,0,0,0,0,50,75,100,125,150,300,450,1000,2000,4000,6000],
        "4":[0,0,0,0,0,40,50,75,100,125,200,300,500,1000,2000,4000],
        "5":[0,0,0,0,0,30,40,50,75,100,150,250,350,800,1500,3000],
        "6":[0,0,0,0,0,25,30,40,50,75,125,200,300,600,1200,2500],
        "7":[0,0,0,0,0,20,25,30,40,50,100,150,250,500,1000,2000],
    }
}
# </editor-fold>



############# Do not edit this line and below #############

Setting = [x for x in Setting.values()]
if __name__ == "__main__":
    print(Setting)
